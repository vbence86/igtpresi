TimeLine=function(a){var b=this,c=a||null,d=[],e=[],f=0,g=!1,h=!1,i=.01;this.getLooping=function(){return h},this.setLooping=function(a){return h=a,b},this.getTarget=function(){return c},this.setTarget=function(a){return c=a,b},this.step=function(a){if(g){for(var j,k=f+a,l=0;l<d.length;l++)if(!(d[l]<f)&&d[l]<k&&(j=e[l].bind(c),j(),!g)){k=d[l]+i;break}k>d[d.length-1]?h?b.start():b.stop():f=k}},this.add=function(a,c){for(var f=0;f<d.length&&!(d[f]>a);f++);return d[f]<a?(d.push(a),e.push(c)):Math.floor(d[f])===a?(d.push(d[f]+i),e.push(c)):Math.floor(d[f-1])===a?(d.splice(f,0,d[f-1]+i),e.splice(f,0,c)):(d.splice(f,0,a),e.splice(f,0,c)),b},this.start=function(){return d.length>0&&(f=0,g=!0),b.step(i),b},this.stop=function(){return f=0,g=!1,b},this.pause=function(){return g=!1,b},this.resume=function(){return g=!0,b},this.clone=function(a){a=a||c;for(var b=new TimeLine(a),f=0;f<d.length;f++)b.add(d[f],e[f]);return b},this.isRunning=function(){return g},this.getProgress=function(){return f},this.toString=function(){for(var a="----TimeLine----\n",b=0;b<d.length;b++)a+="T: "+d[b]+"\n",a+="Callback:\n",a+=e[b].toString(),a+="\n---\n";return a+="----------------\n"}};